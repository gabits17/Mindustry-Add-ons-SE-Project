## Test Specifications
I wasn't able to create unit tests for the new functionality. The ``ApplicationTests`` supports setting up a very reduced game environment to allow for testing functionalities. The problem is that the ``Leaks`` class specifically interacts with the ``Renderer`` from ``Vars``, and ``Renderer``
has a series of **public final** attributes that in test mode cause errors due to some structures at a lower level of abstraction (a ByteBuffer that isn't working in test mode). No existing unit test seems to use renderers either, due to their communication with the display that becomes problematic in a test case.

The issue with these is that I unfortunately cannot use anonymous classes to override their function since attributes cannot be overridden by anonymous classes.
Since the main important method in ``Leaks`` ``checkLeak()`` requires using the ``Renderer`` instance in ``Vars`` to access the minimap, and others are simply complementary to it (or in the case of showLocalLeaks interact with drawing to the display,
so can't be tested in test mode), it means no tests can be reasonably done without creating an entirely separate branch with modified logic to allow for testing, but that would then not function for the normal game scenario. This doesn't
seem to be the outcome we're looking for in unit tests, so I'll set that aside.

Additionally, with ``Leaks`` being a singleton, the class instantiation is done in the static method ``getInstance()``, so I can't simply create an override in an anonymous class, because that anonymous class would never be used.
Classes call ``Leaks.getInstance()`` to gain access to the singleton instance, so this behavior cannot be modified.

### Scenario-based testing
#### Test guide
Note: I don't specify different tests for different liquid types because the logic does not interact with liquid types directly, only with a certain kind of liquid-transferring block, for which the functionality while
holding any liquid should not differ, as the liquids are not handled separately. Most tests show leaks over ground instead of water. This is because leaks on the ground create a puddle, so are more visible and therefore easier
to confirm visually than leaks over water. The code implementation doesn't actually involve puddles, these were an existing, separate part of the game.

These tests cover single player tests:

The block placed here is a conduit, there is another one that looks the same but is also ``Conduit``, it is simply the version of the conduit from another type of map (looks different visually, same class used).

| Pre-Condition                                                                                                                                                                 | Test case id                                            | Description                                                                                                                                                                                                | Expected Result                                                                                                                                                                                                                                                                       | Video                                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|
| - At map selection screen                                                                                                                                                     | Joining map with leaks                                  | 1. Join a custom game.<br/>2. Open minimap.                                                                                                                                                                | 1. Map loads all active leaks. Nearby player-team leaks have light-blue dashed circle.<br/>2. All leak tiles have corresponding pixels on minimap as light blue color.                                                                                                                | [![JoinMapTest](https://img.youtube.com/vi/JiBHQCbIdM8/0.jpg)](https://www.youtube.com/watch?v=JiBHQCbIdM8)                  |
| - Within a map with player-team leaks<br/>- Enough resources for block placement                                                                                              | Plugging player-team leak with block                    | 1. Move close to a nearby leak in the team-controlled section.<br/>2. Open minimap.<br/>3. Close minimap.<br/>4. Place block on leaking end of conduit.<br/>5. Open minimap.                               | 1. Dashed circle around leak shows.<br/>2. The minimap pixel corresponding to the leaking tile is light-blue.<br/>3. Normal overworld shown.<br/>4. Leak stops. Dashed circle disappears.<br/>5. Minimap pixel for corresponding tile stops being light blue.                         | [![PlugTeamLeakWBlock](https://img.youtube.com/vi/WlNNyXtdOHI/0.jpg)](https://www.youtube.com/watch?v=WlNNyXtdOHI)           |
| - Within a map with plugged leak <br/>- Player-team conduit leak over ground plugged by solid block                                                                           | Creating player-team leak by breaking block over ground | 1. Approach nearby plugged leak in the team-controlled section without liquid floor.<br/>2. Open minimap.<br/>3. Close minimap.<br/>4. Remove solid block from flowing end of conduit.<br/>5. Open minimap. | 1. No dashed circle loads around plugged leak (since there is no leak).<br/>2. Corresponding minimap pixel is not light blue<br/>3. Normal overworld shown.<br/>4. Puddle forms on ground. Dashed circle around newly created leak.<br/>5. Corresponding minimap pixel is light blue. | [![StartTeamLeakWBlock](https://img.youtube.com/vi/UEp_P90wBQo/0.jpg)](https://www.youtube.com/watch?v=UEp_P90wBQo)          |
| - Within a map with plugged leak<br/>- Player-team conduit leak over water plugged by solid block                                                                             | Creating player-team leak by breaking block over water  | 1. Approach nearby plugged leak in the team-controlled section with liquid floor.<br/>2. Open minimap.<br/>3. Close minimap.<br/>4. Remove solid block from flowing end of conduit.<br/>5. Open minimap.   | 1. No dashed circle loads around plugged leak (since there is no leak).<br/>2. Corresponding minimap pixel is not light blue<br/>3. Normal overworld shown.<br/>4. Dashed circle around newly created leak.<br/>5. Corresponding minimap pixel is light blue.                         | [![StartTeamLeakWBlockOverWater](https://img.youtube.com/vi/cgb5jHEgM08/0.jpg)](https://www.youtube.com/watch?v=cgb5jHEgM08) |
| - Within a map with player-team active leak<br/>- Within range of player-team conduit leak                                                                                    | Player team leak out of range                           | 1. Move away from nearby leak.                                                                                                                                                                             | 1. Dashed circle around leak disappears.                                                                                                                                                                                                                                              | [![moveAway](https://img.youtube.com/vi/oFDy8mPUPRY/0.jpg)](https://www.youtube.com/watch?v=oFDy8mPUPRY)                     |
| - Within a map with player-team active leak<br/>- Outside of range of player-team conduit leak                                                                                | Player team leak within range                           | 1. Move towards nearby leak.                                                                                                                                                                               | 1. Dashed circle around leak shows.                                                                                                                                                                                                                                                   | [![moveTowards](https://img.youtube.com/vi/ljXKNiBmXXw/0.jpg)](https://www.youtube.com/watch?v=ljXKNiBmXXw)                  |
| - Within a map with multiple player-team active leak<br/>- Player-team leaks within intersecting range of detection<br/>- Outside of range of at one player-team conduit leak | Multiple player-team leaks within range                 | 1. Move between multiple leaks.                                                                                                                                                                            | 1. Dashed circle around all nearby leaks show.                                                                                                                                                                                                                                        | [![leakIntersect](https://img.youtube.com/vi/K5OS1r5hDzw/0.jpg)](https://www.youtube.com/watch?v=K5OS1r5hDzw)                |
| - Within a map with non-player-team leaks<br/>- Nearby non-player-team leak                                                                                                   | Non-player-team leaks aren't registered                 | 1. Open minimap.                                                                                                                                                                                           | 1. There is no light-blue pixel in the tile with a leaking conduit.                                                                                                                                                                                                                   | [![nonTeamLeak](https://img.youtube.com/vi/MDHXi_B1FlA/0.jpg)](https://www.youtube.com/watch?v=MDHXi_B1FlA)                  |
| - Within a map <br/>- Nearby armored conduit pipeline                                                                                                                         | Armored Conduits (non-leaking) don't register leaks     | 1. Open minimap.                                                                                                                                                                                           | 1. There is no light-blue pixel in the pipeline ending with an armored conduit.                                                                                                                                                                                                       | [![armoredConduitsNoLeak](https://img.youtube.com/vi/-SUYHOVlutU/0.jpg)](https://www.youtube.com/watch?v=-SUYHOVlutU)        |

Leak forwarding (creating new leak and patching old ones on extending a leaking pipeline):

| Pre-Condition                                                                                                                                                                    | Test case id                               | Description                                                                                                                                                                                               | Expected Result                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Video                                                                                                             |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
| - Within a map with player-team active leak<br/> - Within building range of leak over ground (not the same as dashed-circle range)                                               | Extending leaking pipeline over ground     | 1. Open minimap.<br/>2. Close minimap.<br/>3. Place a line of conduits at the leaking end of a conduit.<br/>4. Open minimap.                                                                              | 1.The minimap tile corresponding to the leaking tile is light blue.<br/>2. Normal overworld shown.<br/>3. The leak is plugged (puddle on the ground in front of conduit gets smaller). A new leak is created (puddle on the ground in front of last conduit in pipeline begins to grow)<br/>4. Minimap previous leak pixel no longer light blue. Pixel corresponding to end of leaking pipeline now light blue.                                                                                                                                                             | [![leakForwarding](https://img.youtube.com/vi/YFRAVxSkq4E/0.jpg)](https://www.youtube.com/watch?v=YFRAVxSkq4E)    |
| - Within a map with player-team active leak from a long pipeline (>15 conduit blocks)<br/> - Within block breaking range of second conduit in pipeline. | Breaking long leaking pipeline over ground | 1. Open minimap.<br/>2. Close minimap.<br/>3. Break the second conduit in the pipeline (starting from the source pump).<br/>4. Immediately open minimap.<br/>5. Wait a few seconds.<br/>6. Close minimap. | 1. There is a leak on the minimap corresponding to the tile at the end of the pipeline (last conduit).<br/>2. Normal overworld shown. <br/>3. There are two leaks, one at the end of the pipeline (liquid still draining), one where the pipeline was broken.<br/>4. Both leaks are shown on the minimap in light blue color.<br/>5. The pixel at the end of the pipeline (from before the break) loses the light blue color (remainining liquid from conduit has drained, no longer leaking).<br/>6. Puddle at the end of the disconnected pipeline is reducing (or gone). | [![longPipelineBreak](https://img.youtube.com/vi/lIkaxv7ZYqM/0.jpg)](https://www.youtube.com/watch?v=lIkaxv7ZYqM) |

Map changing:
Map changing resets known leaks (doesn't keep active leaks from other map).  
Non-campaign here is just for simplicity, exiting a map in general triggers a logic reset. It's just so the instructions better match exact steps.
Picking another game with the same map is for the same purpose, since it will result in spawning in a similar area, which is more helpful for ensuring that the leaks from the last map aren't still active.

| Pre-Condition                                                                                                      | Test case id      | Description                                                                                                                                                                                                                               | Expected Result                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Video                                                                                           |
|--------------------------------------------------------------------------------------------------------------------|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| - Within a map for a custom game (non-campaign) with player-team active leaks<br/>- The user has other saved games |  Leaving a map and joining another | 1. Press "Esc".<br/>2. Press "Save & Quit".<br/>3. Press "ok". <br/>4. Press "Play" in the main menu.<br/>5. Press "Load Game".<br/>6. Click on another game in the same map (different from the game at the start).<br/>7. Open minimap. | 1. Pause menu is displayed. Including "Save & Quit" button.<br/>2. Quit confirmation menu is displayed.<br/>3. Main menu displayed.<br/>4. Play options displayed "Campaign, Join Game, Custom Game, Load Game".<br/>5. Existing saves for custom games are displayed.<br/>6. The map is joined. Map leaks are loaded.<br/>7. None of the leaks from the old map are visible in light blue (unless there are active player-team leaks in the same tiles). All active leaks are shown in light-blue color. | [![changeMap](https://img.youtube.com/vi/wZOfWQnyZTI/0.jpg)](https://www.youtube.com/watch?v=wZOfWQnyZTI) |
